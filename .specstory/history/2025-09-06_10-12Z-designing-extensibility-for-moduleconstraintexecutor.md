<!-- Generated by SpecStory -->

# Designing extensibility for ModuleConstraintExecutor (2025-09-06 10:12Z)

_**User (2025-09-06 09:32Z)**_

请按下列扩展性设计，
###业务场景：
1、现有有企业DemoCompany(DC)使用ModuleConstraintExecutor，可能需要适配，适配的场景有：
a. 字段属性的适配，
    Part.code-->DC : Part.partNumber 
b. 有一些扩展字段
    DC有些特殊字段，在有些业务框架，如：PartInst增加扩展属性deliveryType(交付类型）
c.  有一下特殊的业务
    比如对计算后的结果做特殊处理，对求解结果根据part类型和partInst对PartInst.deliveryType赋值 

###设计如下：
####1.在当前主代码增加一下扩展性
a. 新增一个ExtensibleProcess基类，支持扩展关键业务操作
b.在ModuleConstraintExecutor.inferParas开放一个后处理接口interface InferParasPostProcess extends ExtensibleProcess{....}
c.ModuleConstraintExecutor新增registerExtensible(ExtensibleProcess eProcess);/unregisterExtensible(ExtensibleProcess eProcess)接口
d.后续对其它操作也提供其它的扩展，如：addModule，暂不实现

####2. 在测试代码做一个扩展样例

a. 建立一个package com.jmix.configengine.extensibleDemo
b. 做如下事情：
b.1 包装基础数据
Module->DCModule
Part->DCModule 
....
b.2 包装一下配置结果类
ModuleInst->DCModuleInst
ParaInst->DCParaInst

b.3 定义属性的适配关系
b.3.1 基础数据的适配关系
AdapterInfo
--DCModuleAdapter
-----Module.code-->DC : DCModule.dccode  --二者字段命名不同
-----Module.name-->DC : DCModule.name  --二者一样
-----Module.type -->DC: GENERAL--Module有，但是DC没有这个字段,使用默认值
-----extAttrs："attrName=season,attrType=String"-->DC:DCModule.season  --Module没有，作为扩展属性
.....

b.3.2 配置结果类适配关系
--DCParaInstAdapter
----...
-----extAttrs："attrName=deliveryType,attrType=String"-->DC:DCPara.deliveryType  --ParaInst没有，作为扩展属性
 
b.4.扩展一个业务处理
b.4.1 实现InferParasPostProcess，
   根据Module,ModuleInst 实现DCPara.deliveryType 的计算 

b.4 参考MyTShirtTest，创建一个DCMyTShirtTest，完成测试 



---

_**Assistant**_

我将按照您的扩展性设计要求来实现这个功能。让我先分析一下需求，然后创建相应的代码结构。


---

## Todo List

- [-] 创建ExtensibleProcess基类，支持扩展关键业务操作
- [ ] 在ModuleConstraintExecutor中新增InferParasPostProcess接口
- [ ] 在ModuleConstraintExecutor中新增registerExtensible/unregisterExtensible接口
- [ ] 创建extensibleDemo包和相关适配器类
- [ ] 实现DCModule、DCPart等包装类
- [ ] 实现DCModuleInst、DCParaInst等配置结果包装类
- [ ] 定义属性适配关系（AdapterInfo、DCModuleAdapter等）
- [ ] 实现InferParasPostProcess业务处理逻辑
- [ ] 创建DCMyTShirtTest测试类

---

首先，让我创建ExtensibleProcess基类：


---

Tool edit_file not found.

---

我需要使用正确的工具来创建文件。让我先查看现有的代码结构：


---

Read file: src/main/java/com/jmix/configengine/ModuleConstraintExecutor.java

---

现在让我使用run_terminal_cmd来创建新的文件：


---

```bash
cd src/main/java/com/jmix/configengine && echo "package com.jmix.configengine;

/**
 * 扩展性处理基类
 * 支持对关键业务操作进行扩展处理
 */
public abstract class ExtensibleProcess {
    
    /**
     * 获取扩展处理器的唯一标识
     * @return 处理器ID
     */
    public abstract String getProcessId();
    
    /**
     * 获取扩展处理器的描述信息
     * @return 描述信息
     */
    public abstract String getDescription();
    
    /**
     * 检查是否支持指定的操作类型
     * @param operationType 操作类型
     * @return 是否支持
     */
    public abstract boolean supports(String operationType);
}" > ExtensibleProcess.java
```

```
D:\01.code\mygithub\jmixconfigengine>cd src/main/java/com/jmix/configengine && e
cho "package com.jmix.configengine;
"package com.jmix.configengine;

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>       
D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>/**    
'/**' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine> * 扩展
性处理基类
'*' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine> * 支持
对关键业务操作进行扩展处理
'*' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine> */    
'*' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>public 
abstract class ExtensibleProcess {
'public' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>       
D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>    /**

'/**' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>     * 
获取扩展处理器的唯一标识
'*' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>     * 
@return 处理器ID
'*' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>     */

'*' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>    pub
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>publi
c abstract class ExtensibleProcess {
'public' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>     
D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>    /
**
'/**' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>     
* 获取扩展处理器的唯一标识
'*' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>     
* @return 处理器ID
'*' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>     
*/
'*' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>    p
ublic abstract String getProcessId();
'public' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>
D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>    /**
'/**' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>     * 获取扩展处理器的描
述信息
'*' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>     * @return 描述信息  
'*' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>     */
'*' 不是内部或外部命令，也不是可运行的程序
或批处理文件。
D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>
```

---

让我使用更简单的方法来创建文件：


---

```bash
cd src/main/java/com/jmix/configengine && type nul > ExtensibleProcess.java
```

```
D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>cd src/main/java/com/jmix/configengi
系统找不到指定的路径。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>
```

---

```bash
type nul > src/main/java/com/jmix/configengine/ExtensibleProcess.java
```

```
D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>type nul > src/main/java/com/jmix/co
系统找不到指定的路径。

D:\01.code\mygithub\jmixconfigengine\src\main\java\com\jmix\configengine>
```

---



---


<!-- Generated by SpecStory -->

# 生成约束代码的逻辑规则 (2025-09-06 06:58Z)

_**User (2025-09-05 14:23Z)**_

根据最新的逻辑，生成对应的约束代码，要求按抽象思路来写inCB等，逻辑如下：\n  //A=(a1,a2,a3,a4,a5),AVar.value的值域
            //B=(b1,b2,b3,b4,b5),BVar.value的值域
            // 规则内容：(a1,a3) Incompatible (b1,b2,b3)，则CA=(a1,a3),CB=(b1,b2,b3),NCA=(a2,a4,a5),NCB=(b4,b5)
            // 解读：
            // 1、正向
            // 1.1 如果AVar.value取CA的一个值(在CA中)，则BVar.value一定不是CB的一个值，取CB内的值是非法的，只能是NCB内的值，如:如果AVar.var=a1,则BVar.var=b4或b5(NCB),不可以是b1 或 b2 或 b3(CB)
            // 1.2 如果AVar.value取NCA一个值(不在CA中)，则BVar.value可以是CB的一个值，也可以是NCB的一个值，如：如果AVar.var=a2,则BVar.var=b1或b2或b3(CB),也可以是b4或b5(NCB)
            // 2.反向
            // 2.1 如果BVar.value取CB的一个值(在CB中)，则AVar.value一定不是CA的一个值，取CA内的值是非法的，只能是NCA内的值，如:如果BVar.var=b1,则AVar.var=a2或a4或a5(NCA),不可以是a1 或 a3(CA)
            // 2.2 如果BVar.value取NCB一个值(不在CB中)，则AVar.value可以是CA的一个值，也可以是NCA的一个值，如：如果BVar.var=b4,则AVar.var=a1 或 a3(CA),也可以是a2 或 a4或a5(NCA)
            

---

_**Assistant**_

我来分析这个不兼容性约束的逻辑，并生成对应的约束代码。


---

## Todo List

- [-] 分析不兼容性约束的逻辑规则
- [ ] 实现不兼容性约束的代码逻辑
- [ ] 验证测试用例与约束逻辑的一致性

---

根据注释中的逻辑分析，这是一个**不兼容性约束**（Incompatible Constraint），与之前的Codependent约束逻辑相反。让我先理解规则：

- CA = (a1, a3) - A的约束集合
- CB = (b1, b2, b3) - B的约束集合  
- NCA = (a2, a4, a5) - A的非约束集合
- NCB = (b4, b5) - B的非约束集合

**核心逻辑**：CA和CB之间是**不兼容**的，即：
- 如果A在CA中，则B**不能**在CB中（必须在NCB中）
- 如果B在CB中，则A**不能**在CA中（必须在NCA中）

现在我来实现约束代码：


---

Read file: src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java

---

现在我需要查看其他约束实现来了解代码模式：


---

<details>
                <summary>Searched codebase "How to implement incompatible constraint logic in ConstraintAlgImpl?" • **15** results</summary>
            
| File | Lines |
|------|-------|
| `src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java` | Lundefined-25 |
| `src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java` | L84-138 |
| `src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java` | L20-49 |
| `src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleRequireTest.java` | L22-53 |
| `src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java` | L45-87 |
| `src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleRequireTest.java` | L50-92 |
| `src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleCodependentTest.java` | L85-139 |
| `src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleCodependentTest.java` | L46-88 |
| `src/test/java/com/jmix/configengine/scenario/ruletest/ParaIsHiddenTest.java` | L33-77 |
| `src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java` | L134-184 |
| `src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java` | L294-298 |
| `src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleCodependentTest.java` | Lundefined-25 |
| `src/test/java/com/jmix/configengine/scenario/ruletest/CalculateRuleSimpleTest.java` | Lundefined-60 |
| `src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java` | L236-279 |
| `src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleCodependentTest.java` | L135-185 |

</details>

---

让我查看Codependent约束的实现来了解正确的模式：


---

Read file: src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleCodependentTest.java

---

现在我明白了！我需要实现**不兼容性约束**，这与Codependent约束的逻辑相反。让我实现正确的约束代码：


---

## Todo List

- [x] 分析不兼容性约束的逻辑规则
- [-] 实现不兼容性约束的代码逻辑
- [ ] 验证测试用例与约束逻辑的一致性

---

Read file: src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java

---

现在我来实现不兼容性约束的代码。根据逻辑分析，不兼容性约束与Codependent约束相反：

- **Codependent**: CA ↔ CB (双向依赖)
- **Incompatible**: CA ↮ CB (双向不兼容)


---

Read file: src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java

---

现在我来实现不兼容性约束的代码：

```java:src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java
        @Override
        protected void initConstraint() {
            //注意： 一定要选择一个值怎么理解（如果不选择，也设置一个可选值就可以表达，这样模型统一了）
            //A=(a1,a2,a3,a4,a5),AVar.value的值域
            //B=(b1,b2,b3,b4,b5),BVar.value的值域
            // 规则内容：(a1,a3) Incompatible (b1,b2,b3)，则CA=(a1,a3),CB=(b1,b2,b3),NCA=(a2,a4,a5),NCB=(b4,b5)
            // 解读：
            // 1、正向
            // 1.1 如果AVar.value取CA的一个值(在CA中)，则BVar.value一定不是CB的一个值，取CB内的值是非法的，只能是NCB内的值，如:如果AVar.var=a1,则BVar.var=b4或b5(NCB),不可以是b1 或 b2 或 b3(CB)
            // 1.2 如果AVar.value取NCA一个值(不在CA中)，则BVar.value可以是CB的一个值，也可以是NCB的一个值，如：如果AVar.var=a2,则BVar.var=b1或b2或b3(CB),也可以是b4或b5(NCB)
            // 2.反向
            // 2.1 如果BVar.value取CB的一个值(在CB中)，则AVar.value一定不是CA的一个值，取CA内的值是非法的，只能是NCA内的值，如:如果BVar.var=b1,则AVar.var=a2或a4或a5(NCA),不可以是a1 或 a3(CA)
            // 2.2 如果BVar.value取NCB一个值(不在CB中)，则AVar.value可以是CA的一个值，也可以是NCA的一个值，如：如果BVar.var=b4,则AVar.var=a1 或 a3(CA),也可以是a2 或 a4或a5(NCA)
            
            // 创建条件变量：A在CA中
            BoolVar inCA = model.newBoolVar("inCA");
            model.addBoolOr(new Literal[]{
                AVar.getParaOptionByCode("a1").getIsSelectedVar(),
                AVar.getParaOptionByCode("a3").getIsSelectedVar()
            }).onlyEnforceIf(inCA);
            model.addBoolAnd(new Literal[]{
                AVar.getParaOptionByCode("a1").getIsSelectedVar().not(),
                AVar.getParaOptionByCode("a3").getIsSelectedVar().not()
            }).onlyEnforceIf(inCA.not());

            // 创建条件变量：B在CB中
            BoolVar inCB = model.newBoolVar("inCB");
            model.addBoolOr(new Literal[]{
                BVar.getParaOptionByCode("b1").getIsSelectedVar(),
                BVar.getParaOptionByCode("b2").getIsSelectedVar(),
                BVar.getParaOptionByCode("b3").getIsSelectedVar()
            }).onlyEnforceIf(inCB);
            model.addBoolAnd(new Literal[]{
                BVar.getParaOptionByCode("b1").getIsSelectedVar().not(),
                BVar.getParaOptionByCode("b2").getIsSelectedVar().not(),
                BVar.getParaOptionByCode("b3").getIsSelectedVar().not()
            }).onlyEnforceIf(inCB.not());

            // 创建条件变量：A不在CA中
            BoolVar notInCA = model.newBoolVar("notInCA");
            model.addBoolOr(new Literal[]{
                AVar.getParaOptionByCode("a2").getIsSelectedVar(),
                AVar.getParaOptionByCode("a4").getIsSelectedVar(),
                AVar.getParaOptionByCode("a5").getIsSelectedVar()
            }).onlyEnforceIf(notInCA);
            model.addBoolAnd(new Literal[]{
                AVar.getParaOptionByCode("a2").getIsSelectedVar().not(),
                AVar.getParaOptionByCode("a4").getIsSelectedVar().not(),
                AVar.getParaOptionByCode("a5").getIsSelectedVar().not()
            }).onlyEnforceIf(notInCA.not());

            // 创建条件变量：B不在CB中
            BoolVar notInCB = model.newBoolVar("notInCB");
            model.addBoolOr(new Literal[]{
                BVar.getParaOptionByCode("b4").getIsSelectedVar(),
                BVar.getParaOptionByCode("b5").getIsSelectedVar()
            }).onlyEnforceIf(notInCB);
            model.addBoolAnd(new Literal[]{
                BVar.getParaOptionByCode("b4").getIsSelectedVar().not(),
                BVar.getParaOptionByCode("b5").getIsSelectedVar().not()
            }).onlyEnforceIf(notInCB.not());

            // Incompatible 双向约束：
            // 正向1.1：如果A在CA中，则B必须不在CB中（必须在NCB中）
            model.addImplication(inCA, notInCB);
            
            // 正向1.2：如果A不在CA中，则B可以在CB中或NCB中（无约束）
            // 这个约束不需要显式添加，因为默认允许
            
            // 反向2.1：如果B在CB中，则A必须不在CA中（必须在NCA中）
            model.addImplication(inCB, notInCA);
            
            // 反向2.2：如果B不在CB中，则A可以在CA中或NCA中（无约束）
            // 这个约束不需要显式添加，因为默认允许
        }
```

让我检查测试用例，看看是否需要调整测试逻辑：


---

Read file: src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java

---

我发现测试用例的逻辑是错误的！测试用例写的是Codependent约束的逻辑，但这是Incompatible约束的测试。我需要修正测试用例：


---

## Todo List

- [x] 分析不兼容性约束的逻辑规则
- [x] 实现不兼容性约束的代码逻辑
- [-] 验证测试用例与约束逻辑的一致性

---

现在我来修正测试用例，使其符合不兼容性约束的逻辑：

```java:src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java
    @Test
    public void testInCARequiresNotInCB() {
        // 测试正向规则1.1: 如果A在CA中(a1)，则B必须不在CB中(b4或b5)
        inferParasByPara("A", "a1");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(2); // B有2种选择
        
        // 验证所有解中B都在NCB中
        for(int i = 0; i < 2; i++) {
            solutions(i).assertPara("B").valueIn("b4", "b5");
        }
        
        // 验证B在CB中的解不存在
        assertSolutionNum("B:b1", 0);
        assertSolutionNum("B:b2", 0);
        assertSolutionNum("B:b3", 0);
    }

    @Test
    public void testInCARequiresNotInCB_A3() {
        // 测试正向规则1.1: 如果A在CA中(a3)，则B必须不在CB中(b4或b5)
        inferParasByPara("A", "a3");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(2); // B有2种选择
        
        // 验证所有解中B都在NCB中
        for(int i = 0; i < 2; i++) {
            solutions(i).assertPara("B").valueIn("b4", "b5");
        }
        
        // 验证B在CB中的解不存在
        assertSolutionNum("B:b1", 0);
        assertSolutionNum("B:b2", 0);
        assertSolutionNum("B:b3", 0);
    }

    @Test
    public void testInCAWithInCBIsInvalid() {
        // 测试正向规则1.1: 如果A在CA中(a1)，则B在CB中(b1、b2或b3)是不合法的
        inferParasByPara("A", "a1"); 
        assertSolutionNum("B:b1", 0);
        assertSolutionNum("B:b2", 0);
        assertSolutionNum("B:b3", 0);
    }

    @Test
    public void testNotInCAAllowsAnyB() {
        // 测试正向规则1.2: 如果A不在CA中(a2)，则B可以是CB或NCB中的任意值
        inferParasByPara("A", "a2");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(5); // B有5种选择
        
        // 验证B可以在CB中
        assertSolutionNum("B:b1", 1);
        assertSolutionNum("B:b2", 1);
        assertSolutionNum("B:b3", 1);
        
        // 验证B也可以在NCB中
        assertSolutionNum("B:b4", 1);
        assertSolutionNum("B:b5", 1);
    }

    @Test
    public void testNotInCAAllowsAnyB_A4() {
        // 测试正向规则1.2: 如果A不在CA中(a4)，则B可以是CB或NCB中的任意值
        inferParasByPara("A", "a4");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(5); // B有5种选择
        
        // 验证B可以在CB中
        assertSolutionNum("B:b1", 1);
        assertSolutionNum("B:b2", 1);
        assertSolutionNum("B:b3", 1);
        
        // 验证B也可以在NCB中
        assertSolutionNum("B:b4", 1);
        assertSolutionNum("B:b5", 1);
    }

    @Test
    public void testNotInCAAllowsAnyB_A5() {
        // 测试正向规则1.2: 如果A不在CA中(a5)，则B可以是CB或NCB中的任意值
        inferParasByPara("A", "a5");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(5); // B有5种选择
        
        // 验证B可以在CB中
        assertSolutionNum("B:b1", 1);
        assertSolutionNum("B:b2", 1);
        assertSolutionNum("B:b3", 1);
        
        // 验证B也可以在NCB中
        assertSolutionNum("B:b4", 1);
        assertSolutionNum("B:b5", 1);
    }

    @Test
    public void testInCBRequiresNotInCA() {
        // 测试反向规则2.1: 如果B在CB中(b1)，则A必须不在CA中(a2、a4或a5)
        inferParasByPara("B", "b1");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(3); // A有3种选择
        
        // 验证A在NCA中
        assertSolutionNum("A:a2", 1);
        assertSolutionNum("A:a4", 1);
        assertSolutionNum("A:a5", 1);
        
        // 验证A在CA中的解不存在
        assertSolutionNum("A:a1", 0);
        assertSolutionNum("A:a3", 0);
    }

    @Test
    public void testInCBRequiresNotInCA_B2B3() {
        // 测试反向规则2.1: 如果B在CB中(b2或b3)，则A必须不在CA中(a2、a4或a5)
        inferParasByPara("B", "b2");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(3); // A有3种选择
        
        // 验证A在NCA中
        assertSolutionNum("A:a2", 1);
        assertSolutionNum("A:a4", 1);
        assertSolutionNum("A:a5", 1);
        
        // 验证A在CA中的解不存在
        assertSolutionNum("A:a1", 0);
        assertSolutionNum("A:a3", 0);
    }

    @Test
    public void testNotInCBAllowsAnyA() {
        // 测试反向规则2.2: 如果B不在CB中(b4)，则A可以是CA或NCA中的任意值
        inferParasByPara("B", "b4");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(5); // A有5种选择
        
        // 验证A可以在CA中
        assertSolutionNum("A:a1", 1);
        assertSolutionNum("A:a3", 1);
        
        // 验证A也可以在NCA中
        assertSolutionNum("A:a2", 1);
        assertSolutionNum("A:a4", 1);
        assertSolutionNum("A:a5", 1);
    }

    @Test
    public void testNotInCBAllowsAnyA_B5() {
        // 测试反向规则2.2: 如果B不在CB中(b5)，则A可以是CA或NCA中的任意值
        inferParasByPara("B", "b5");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(5); // A有5种选择
        
        // 验证A可以在CA中
        assertSolutionNum("A:a1", 1);
        assertSolutionNum("A:a3", 1);
        
        // 验证A也可以在NCA中
        assertSolutionNum("A:a2", 1);
        assertSolutionNum("A:a4", 1);
        assertSolutionNum("A:a5", 1);
    }

    @Test
    public void testIncompatibleBidirectionalConstraint() {
        // 测试Incompatible双向约束的完整性
        // 验证CA和CB组之间的双向不兼容关系
        
        // 测试1: A在CA中时，B必须不在CB中
        inferParasByPara("A", "a1");
        assertSolutionNum("B:b1", 0);
        assertSolutionNum("B:b2", 0);
        assertSolutionNum("B:b3", 0);
        assertSolutionNum("B:b4", 1);
        assertSolutionNum("B:b5", 1);
        
        // 测试2: A不在CA中时，B可以在CB中或NCB中
        inferParasByPara("A", "a2");
        assertSolutionNum("B:b1", 1);
        assertSolutionNum("B:b2", 1);
        assertSolutionNum("B:b3", 1);
        assertSolutionNum("B:b4", 1);
        assertSolutionNum("B:b5", 1);
        
        // 测试3: B在CB中时，A必须不在CA中
        inferParasByPara("B", "b1");
        assertSolutionNum("A:a1", 0);
        assertSolutionNum("A:a3", 0);
        assertSolutionNum("A:a2", 1);
        assertSolutionNum("A:a4", 1);
        assertSolutionNum("A:a5", 1);
        
        // 测试4: B不在CB中时，A可以在CA中或NCA中
        inferParasByPara("B", "b4");
        assertSolutionNum("A:a1", 1);
        assertSolutionNum("A:a3", 1);
        assertSolutionNum("A:a2", 1);
        assertSolutionNum("A:a4", 1);
        assertSolutionNum("A:a5", 1);
    }
```

现在让我完整地更新这个文件：


---

Read file: src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java

---

现在我来完整地重写这个文件，实现正确的不兼容性约束逻辑：

```java:src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java
package com.jmix.configengine.scenario.ruletest;

import com.google.ortools.sat.BoolVar;
import com.google.ortools.sat.Literal;
import com.jmix.configengine.artifact.ConstraintAlgImpl;
import com.jmix.configengine.artifact.ParaVar;
import com.jmix.configengine.scenario.base.ModuleAnno;
import com.jmix.configengine.scenario.base.ModuleSecnarioTestBase;
import com.jmix.configengine.scenario.base.ParaAnno;
import lombok.extern.slf4j.Slf4j;

import java.util.Arrays;

import org.junit.Test;

/**
 * 不兼容性规则测试类
 */
@Slf4j
public class CompatiableRuleIncompatibleTest extends ModuleSecnarioTestBase {
    //---------------规则定义start----------------------------------------
    @ModuleAnno(id = 123L)
    static public class CompatiableRuleIncompatibleConstraint extends ConstraintAlgImpl {
        @ParaAnno(
            options = {"a1", "a2", "a3", "a4","a5"}
        )
        private ParaVar AVar;
    
        @ParaAnno(
            options = {"b1", "b2", "b3", "b4","b5"}
        )
        private ParaVar BVar;

        @Override
        protected void initConstraint() {
            //注意： 一定要选择一个值怎么理解（如果不选择，也设置一个可选值就可以表达，这样模型统一了）
            //A=(a1,a2,a3,a4,a5),AVar.value的值域
            //B=(b1,b2,b3,b4,b5),BVar.value的值域
            // 规则内容：(a1,a3) Incompatible (b1,b2,b3)，则CA=(a1,a3),CB=(b1,b2,b3),NCA=(a2,a4,a5),NCB=(b4,b5)
            // 解读：
            // 1、正向
            // 1.1 如果AVar.value取CA的一个值(在CA中)，则BVar.value一定不是CB的一个值，取CB内的值是非法的，只能是NCB内的值，如:如果AVar.var=a1,则BVar.var=b4或b5(NCB),不可以是b1 或 b2 或 b3(CB)
            // 1.2 如果AVar.value取NCA一个值(不在CA中)，则BVar.value可以是CB的一个值，也可以是NCB的一个值，如：如果AVar.var=a2,则BVar.var=b1或b2或b3(CB),也可以是b4或b5(NCB)
            // 2.反向
            // 2.1 如果BVar.value取CB的一个值(在CB中)，则AVar.value一定不是CA的一个值，取CA内的值是非法的，只能是NCA内的值，如:如果BVar.var=b1,则AVar.var=a2或a4或a5(NCA),不可以是a1 或 a3(CA)
            // 2.2 如果BVar.value取NCB一个值(不在CB中)，则AVar.value可以是CA的一个值，也可以是NCA的一个值，如：如果BVar.var=b4,则AVar.var=a1 或 a3(CA),也可以是a2 或 a4或a5(NCA)
            
            // 创建条件变量：A在CA中
            BoolVar inCA = model.newBoolVar("inCA");
            model.addBoolOr(new Literal[]{
                AVar.getParaOptionByCode("a1").getIsSelectedVar(),
                AVar.getParaOptionByCode("a3").getIsSelectedVar()
            }).onlyEnforceIf(inCA);
            model.addBoolAnd(new Literal[]{
                AVar.getParaOptionByCode("a1").getIsSelectedVar().not(),
                AVar.getParaOptionByCode("a3").getIsSelectedVar().not()
            }).onlyEnforceIf(inCA.not());

            // 创建条件变量：B在CB中
            BoolVar inCB = model.newBoolVar("inCB");
            model.addBoolOr(new Literal[]{
                BVar.getParaOptionByCode("b1").getIsSelectedVar(),
                BVar.getParaOptionByCode("b2").getIsSelectedVar(),
                BVar.getParaOptionByCode("b3").getIsSelectedVar()
            }).onlyEnforceIf(inCB);
            model.addBoolAnd(new Literal[]{
                BVar.getParaOptionByCode("b1").getIsSelectedVar().not(),
                BVar.getParaOptionByCode("b2").getIsSelectedVar().not(),
                BVar.getParaOptionByCode("b3").getIsSelectedVar().not()
            }).onlyEnforceIf(inCB.not());

            // 创建条件变量：A不在CA中
            BoolVar notInCA = model.newBoolVar("notInCA");
            model.addBoolOr(new Literal[]{
                AVar.getParaOptionByCode("a2").getIsSelectedVar(),
                AVar.getParaOptionByCode("a4").getIsSelectedVar(),
                AVar.getParaOptionByCode("a5").getIsSelectedVar()
            }).onlyEnforceIf(notInCA);
            model.addBoolAnd(new Literal[]{
                AVar.getParaOptionByCode("a2").getIsSelectedVar().not(),
                AVar.getParaOptionByCode("a4").getIsSelectedVar().not(),
                AVar.getParaOptionByCode("a5").getIsSelectedVar().not()
            }).onlyEnforceIf(notInCA.not());

            // 创建条件变量：B不在CB中
            BoolVar notInCB = model.newBoolVar("notInCB");
            model.addBoolOr(new Literal[]{
                BVar.getParaOptionByCode("b4").getIsSelectedVar(),
                BVar.getParaOptionByCode("b5").getIsSelectedVar()
            }).onlyEnforceIf(notInCB);
            model.addBoolAnd(new Literal[]{
                BVar.getParaOptionByCode("b4").getIsSelectedVar().not(),
                BVar.getParaOptionByCode("b5").getIsSelectedVar().not()
            }).onlyEnforceIf(notInCB.not());

            // Incompatible 双向约束：
            // 正向1.1：如果A在CA中，则B必须不在CB中（必须在NCB中）
            model.addImplication(inCA, notInCB);
            
            // 正向1.2：如果A不在CA中，则B可以在CB中或NCB中（无约束）
            // 这个约束不需要显式添加，因为默认允许
            
            // 反向2.1：如果B在CB中，则A必须不在CA中（必须在NCA中）
            model.addImplication(inCB, notInCA);
            
            // 反向2.2：如果B不在CB中，则A可以在CA中或NCA中（无约束）
            // 这个约束不需要显式添加，因为默认允许
        }
    }
   //---------------规则定义end----------------------------------------

    public CompatiableRuleIncompatibleTest() {
        super(CompatiableRuleIncompatibleConstraint.class);
    }

    @Test
    public void testInCARequiresNotInCB() {
        // 测试正向规则1.1: 如果A在CA中(a1)，则B必须不在CB中(b4或b5)
        inferParasByPara("A", "a1");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(2); // B有2种选择
        
        // 验证所有解中B都在NCB中
        for(int i = 0; i < 2; i++) {
            solutions(i).assertPara("B").valueIn("b4", "b5");
        }
        
        // 验证B在CB中的解不存在
        assertSolutionNum("B:b1", 0);
        assertSolutionNum("B:b2", 0);
        assertSolutionNum("B:b3", 0);
    }

    @Test
    public void testInCARequiresNotInCB_A3() {
        // 测试正向规则1.1: 如果A在CA中(a3)，则B必须不在CB中(b4或b5)
        inferParasByPara("A", "a3");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(2); // B有2种选择
        
        // 验证所有解中B都在NCB中
        for(int i = 0; i < 2; i++) {
            solutions(i).assertPara("B").valueIn("b4", "b5");
        }
        
        // 验证B在CB中的解不存在
        assertSolutionNum("B:b1", 0);
        assertSolutionNum("B:b2", 0);
        assertSolutionNum("B:b3", 0);
    }

    @Test
    public void testInCAWithInCBIsInvalid() {
        // 测试正向规则1.1: 如果A在CA中(a1)，则B在CB中(b1、b2或b3)是不合法的
        inferParasByPara("A", "a1"); 
        assertSolutionNum("B:b1", 0);
        assertSolutionNum("B:b2", 0);
        assertSolutionNum("B:b3", 0);
    }

    @Test
    public void testNotInCAAllowsAnyB() {
        // 测试正向规则1.2: 如果A不在CA中(a2)，则B可以是CB或NCB中的任意值
        inferParasByPara("A", "a2");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(5); // B有5种选择
        
        // 验证B可以在CB中
        assertSolutionNum("B:b1", 1);
        assertSolutionNum("B:b2", 1);
        assertSolutionNum("B:b3", 1);
        
        // 验证B也可以在NCB中
        assertSolutionNum("B:b4", 1);
        assertSolutionNum("B:b5", 1);
    }

    @Test
    public void testNotInCAAllowsAnyB_A4() {
        // 测试正向规则1.2: 如果A不在CA中(a4)，则B可以是CB或NCB中的任意值
        inferParasByPara("A", "a4");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(5); // B有5种选择
        
        // 验证B可以在CB中
        assertSolutionNum("B:b1", 1);
        assertSolutionNum("B:b2", 1);
        assertSolutionNum("B:b3", 1);
        
        // 验证B也可以在NCB中
        assertSolutionNum("B:b4", 1);
        assertSolutionNum("B:b5", 1);
    }

    @Test
    public void testNotInCAAllowsAnyB_A5() {
        // 测试正向规则1.2: 如果A不在CA中(a5)，则B可以是CB或NCB中的任意值
        inferParasByPara("A", "a5");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(5); // B有5种选择
        
        // 验证B可以在CB中
        assertSolutionNum("B:b1", 1);
        assertSolutionNum("B:b2", 1);
        assertSolutionNum("B:b3", 1);
        
        // 验证B也可以在NCB中
        assertSolutionNum("B:b4", 1);
        assertSolutionNum("B:b5", 1);
    }

    @Test
    public void testInCBRequiresNotInCA() {
        // 测试反向规则2.1: 如果B在CB中(b1)，则A必须不在CA中(a2、a4或a5)
        inferParasByPara("B", "b1");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(3); // A有3种选择
        
        // 验证A在NCA中
        assertSolutionNum("A:a2", 1);
        assertSolutionNum("A:a4", 1);
        assertSolutionNum("A:a5", 1);
        
        // 验证A在CA中的解不存在
        assertSolutionNum("A:a1", 0);
        assertSolutionNum("A:a3", 0);
    }

    @Test
    public void testInCBRequiresNotInCA_B2B3() {
        // 测试反向规则2.1: 如果B在CB中(b2或b3)，则A必须不在CA中(a2、a4或a5)
        inferParasByPara("B", "b2");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(3); // A有3种选择
        
        // 验证A在NCA中
        assertSolutionNum("A:a2", 1);
        assertSolutionNum("A:a4", 1);
        assertSolutionNum("A:a5", 1);
        
        // 验证A在CA中的解不存在
        assertSolutionNum("A:a1", 0);
        assertSolutionNum("A:a3", 0);
    }

    @Test
    public void testNotInCBAllowsAnyA() {
        // 测试反向规则2.2: 如果B不在CB中(b4)，则A可以是CA或NCA中的任意值
        inferParasByPara("B", "b4");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(5); // A有5种选择
        
        // 验证A可以在CA中
        assertSolutionNum("A:a1", 1);
        assertSolutionNum("A:a3", 1);
        
        // 验证A也可以在NCA中
        assertSolutionNum("A:a2", 1);
        assertSolutionNum("A:a4", 1);
        assertSolutionNum("A:a5", 1);
    }

    @Test
    public void testNotInCBAllowsAnyA_B5() {
        // 测试反向规则2.2: 如果B不在CB中(b5)，则A可以是CA或NCA中的任意值
        inferParasByPara("B", "b5");
        
        resultAssert()
                .assertSuccess()
                .assertSolutionSizeEqual(5); // A有5种选择
        
        // 验证A可以在CA中
        assertSolutionNum("A:a1", 1);
        assertSolutionNum("A:a3", 1);
        
        // 验证A也可以在NCA中
        assertSolutionNum("A:a2", 1);
        assertSolutionNum("A:a4", 1);
        assertSolutionNum("A:a5", 1);
    }

    @Test
    public void testIncompatibleBidirectionalConstraint() {
        // 测试Incompatible双向约束的完整性
        // 验证CA和CB组之间的双向不兼容关系
        
        // 测试1: A在CA中时，B必须不在CB中
        inferParasByPara("A", "a1");
        assertSolutionNum("B:b1", 0);
        assertSolutionNum("B:b2", 0);
        assertSolutionNum("B:b3", 0);
        assertSolutionNum("B:b4", 1);
        assertSolutionNum("B:b5", 1);
        
        // 测试2: A不在CA中时，B可以在CB中或NCB中
        inferParasByPara("A", "a2");
        assertSolutionNum("B:b1", 1);
        assertSolutionNum("B:b2", 1);
        assertSolutionNum("B:b3", 1);
        assertSolutionNum("B:b4", 1);
        assertSolutionNum("B:b5", 1);
        
        // 测试3: B在CB中时，A必须不在CA中
        inferParasByPara("B", "b1");
        assertSolutionNum("A:a1", 0);
        assertSolutionNum("A:a3", 0);
        assertSolutionNum("A:a2", 1);
        assertSolutionNum("A:a4", 1);
        assertSolutionNum("A:a5", 1);
        
        // 测试4: B不在CB中时，A可以在CA中或NCA中
        inferParasByPara("B", "b4");
        assertSolutionNum("A:a1", 1);
        assertSolutionNum("A:a3", 1);
        assertSolutionNum("A:a2", 1);
        assertSolutionNum("A:a4", 1);
        assertSolutionNum("A:a5", 1);
    }
}
```


---

## Todo List

- [x] 分析不兼容性约束的逻辑规则
- [x] 实现不兼容性约束的代码逻辑
- [x] 验证测试用例与约束逻辑的一致性

---

## 总结

我已经根据不兼容性约束的逻辑完成了代码实现。主要特点：

### 🔧 **约束实现逻辑**

1. **条件变量定义**：
   - `inCA`: A在CA中(a1,a3)
   - `inCB`: B在CB中(b1,b2,b3)  
   - `notInCA`: A不在CA中(a2,a4,a5)
   - `notInCB`: B不在CB中(b4,b5)

2. **不兼容性约束**：
   - `model.addImplication(inCA, notInCB)` - 如果A在CA中，则B必须不在CB中
   - `model.addImplication(inCB, notInCA)` - 如果B在CB中，则A必须不在CA中

### 🧪 **测试用例修正**

修正了所有测试用例，使其符合不兼容性约束的逻辑：

- **正向规则1.1**: A在CA中 → B必须在NCB中
- **正向规则1.2**: A不在CA中 → B可以是CB或NCB中任意值
- **反向规则2.1**: B在CB中 → A必须在NCA中  
- **反向规则2.2**: B不在CB中 → A可以是CA或NCA中任意值

### 📝 **关键差异**

与Codependent约束相比，Incompatible约束使用：
- `model.addImplication(inCA, notInCB)` 而不是 `model.addImplication(inCA, inCB)`
- `model.addImplication(inCB, notInCA)` 而不是 `model.addImplication(inCB, inCA)`

这确保了CA和CB组之间的**双向不兼容关系**，符合注释中描述的业务逻辑。

---

_**User (2025-09-05 14:23Z)**_

把选择的代码参考addCompatibleConstraintRequires泛化抽取为一个父类的函数Incompatible

---

_**Assistant**_

我来分析现有的`addCompatibleConstraintRequires`方法，然后创建一个泛化的`addCompatibleConstraintIncompatible`方法。


---

<details>
                <summary>Searched codebase "How is addCompatibleConstraintRequires implemented in ConstraintAlgImpl?" • **15** results</summary>
            
| File | Lines |
|------|-------|
| `src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java` | L242-282 |
| `src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java` | L279-320 |
| `src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java` | L227-251 |
| `src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java` | L309-351 |
| `src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java` | Lundefined-71 |
| `src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java` | L348-384 |
| `src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java` | L177-232 |
| `src/main/java/com/jmix/configengine/artifact/ModuleAlgArtifactGenerator.java` | L172-202 |
| `src/main/java/com/jmix/configengine/artifact/ModuleAlgArtifactGenerator.java` | L146-178 |
| `src/main/java/com/jmix/configengine/artifact/ConstraintAlg.java` | Lundefined-6 |
| `src/main/java/com/jmix/configengine/artifact/ModuleAlgArtifactGenerator.java` | Lundefined-28 |
| `src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java` | L65-135 |
| `src/main/java/com/jmix/configengine/artifact/RuleInfo.java` | Lundefined-73 |
| `src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java` | L128-183 |
| `src/main/java/com/jmix/configengine/artifact/ModuleAlgArtifactGenerator.java` | L295-361 |

</details>

---

让我继续查看`addCompatibleConstraintCoDependent`方法的完整实现：


---

Read file: src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java

---

Read file: src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java

---

现在我了解了现有的方法结构。让我创建一个泛化的`addCompatibleConstraintIncompatible`方法，并更新测试类来使用它：


---

Read file: src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java

---

现在我来添加`addCompatibleConstraintIncompatible`方法到`ConstraintAlgImpl`类中：

```java:src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java
		// 反向2.2：如果右侧非条件为true，则左侧非条件必须为true
		model.addImplication(rightNotCond, leftNotCond);
	}
	
	/**
     * 兼容性规则：Incompatible关系约束
     * 规则内容：双向不兼容关系，左侧参数和右侧参数不能在对应的组内同时存在
     * 例如：(a1,a3) Incompatible (b1,b2,b3) 表示：
     * - 如果A选择a1或a3，则B不能选择b1、b2或b3（必须选择b4或b5）
     * - 如果A选择a2、a4或a5，则B可以选择任意值
     * - 如果B选择b1、b2或b3，则A不能选择a1或a3（必须选择a2、a4或a5）
     * - 如果B选择b4或b5，则A可以选择任意值
     */
    public void addCompatibleConstraintIncompatible(String ruleCode, ParaVar leftParaVar, List<String> leftParaFilterOptionCodes,
		ParaVar rightParaVar, List<String> rightParaFilterOptionCodes) {
		// left:确保只有一个参数选项被选中
		model.addExactlyOne(leftParaVar.optionSelectVars.values().stream()
			.map(option -> option.getIsSelectedVar())
			.toArray(BoolVar[]::new));
		// right:确保只有一个参数选项被选中
		model.addExactlyOne(rightParaVar.optionSelectVars.values().stream()
			.map(option -> option.getIsSelectedVar())
			.toArray(BoolVar[]::new));

		// 定义左侧条件：左侧集合中至少一个被选中
		BoolVar leftCond = model.newBoolVar(ruleCode + "_" + "leftCond");
		Literal[] leftSelected = leftParaVar.optionSelectVars.values().stream()
			.filter(option -> leftParaFilterOptionCodes.contains(option.getCode()))
			.map(option -> (Literal) option.getIsSelectedVar())
			.toArray(Literal[]::new);
		// 当leftCond为true时，左侧集合中至少一个被选中；当为false时，左侧集合全部不被选中
		model.addBoolOr(leftSelected).onlyEnforceIf(leftCond);
		model.addBoolAnd(Arrays.stream(leftSelected).map(Literal::not).toArray(Literal[]::new)).onlyEnforceIf(leftCond.not());

		// 定义右侧条件：右侧集合中至少一个被选中
		BoolVar rightCond = model.newBoolVar(ruleCode + "_" + "rightCond");
		Literal[] rightSelected = rightParaVar.optionSelectVars.values().stream()
			.filter(option -> rightParaFilterOptionCodes.contains(option.getCode()))
			.map(option -> (Literal) option.getIsSelectedVar())
			.toArray(Literal[]::new);
		// 当rightCond为true时，右侧集合中至少一个被选中；当为false时，右侧集合全部不被选中
		model.addBoolOr(rightSelected).onlyEnforceIf(rightCond);
		model.addBoolAnd(Arrays.stream(rightSelected).map(Literal::not).toArray(Literal[]::new)).onlyEnforceIf(rightCond.not());

		// 定义左侧非条件：左侧集合外至少一个被选中
		BoolVar leftNotCond = model.newBoolVar(ruleCode + "_" + "leftNotCond");
		Literal[] leftNotSelected = leftParaVar.optionSelectVars.values().stream()
			.filter(option -> !leftParaFilterOptionCodes.contains(option.getCode()))
			.map(option -> (Literal) option.getIsSelectedVar())
			.toArray(Literal[]::new);
		// 当leftNotCond为true时，左侧集合外至少一个被选中；当为false时，左侧集合外全部不被选中
		model.addBoolOr(leftNotSelected).onlyEnforceIf(leftNotCond);
		model.addBoolAnd(Arrays.stream(leftNotSelected).map(Literal::not).toArray(Literal[]::new)).onlyEnforceIf(leftNotCond.not());

		// 定义右侧非条件：右侧集合外至少一个被选中
		BoolVar rightNotCond = model.newBoolVar(ruleCode + "_" + "rightNotCond");
		Literal[] rightNotSelected = rightParaVar.optionSelectVars.values().stream()
			.filter(option -> !rightParaFilterOptionCodes.contains(option.getCode()))
			.map(option -> (Literal) option.getIsSelectedVar())
			.toArray(Literal[]::new);
		// 当rightNotCond为true时，右侧集合外至少一个被选中；当为false时，右侧集合外全部不被选中
		model.addBoolOr(rightNotSelected).onlyEnforceIf(rightNotCond);
		model.addBoolAnd(Arrays.stream(rightNotSelected).map(Literal::not).toArray(Literal[]::new)).onlyEnforceIf(rightNotCond.not());
		
		// 实现Incompatible双向关系：
		// 正向1.1：如果左侧条件为true，则右侧条件必须为false（右侧非条件必须为true）
		model.addImplication(leftCond, rightNotCond);
		
		// 正向1.2：如果左侧非条件为true，则右侧可以是任意值（无约束）
		// 这个约束不需要显式添加，因为默认允许
		
		// 反向2.1：如果右侧条件为true，则左侧条件必须为false（左侧非条件必须为true）
		model.addImplication(rightCond, leftNotCond);
		
		// 反向2.2：如果右侧非条件为true，则左侧可以是任意值（无约束）
		// 这个约束不需要显式添加，因为默认允许
	}
}
```

现在我来更新测试类，使用新的泛化方法：

```java:src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java
        @Override
        protected void initConstraint() {
            //注意： 一定要选择一个值怎么理解（如果不选择，也设置一个可选值就可以表达，这样模型统一了）
            //A=(a1,a2,a3,a4,a5),AVar.value的值域
            //B=(b1,b2,b3,b4,b5),BVar.value的值域
            // 规则内容：(a1,a3) Incompatible (b1,b2,b3)，则CA=(a1,a3),CB=(b1,b2,b3),NCA=(a2,a4,a5),NCB=(b4,b5)
            // 解读：
            // 1、正向
            // 1.1 如果AVar.value取CA的一个值(在CA中)，则BVar.value一定不是CB的一个值，取CB内的值是非法的，只能是NCB内的值，如:如果AVar.var=a1,则BVar.var=b4或b5(NCB),不可以是b1 或 b2 或 b3(CB)
            // 1.2 如果AVar.value取NCA一个值(不在CA中)，则BVar.value可以是CB的一个值，也可以是NCB的一个值，如：如果AVar.var=a2,则BVar.var=b1或b2或b3(CB),也可以是b4或b5(NCB)
            // 2.反向
            // 2.1 如果BVar.value取CB的一个值(在CB中)，则AVar.value一定不是CA的一个值，取CA内的值是非法的，只能是NCA内的值，如:如果BVar.var=b1,则AVar.var=a2或a4或a5(NCA),不可以是a1 或 a3(CA)
            // 2.2 如果BVar.value取NCB一个值(不在CB中)，则AVar.value可以是CA的一个值，也可以是NCA的一个值，如：如果BVar.var=b4,则AVar.var=a1 或 a3(CA),也可以是a2 或 a4或a5(NCA)
            
            // 使用泛化的Incompatible约束方法
            addCompatibleConstraintIncompatible("rule1", AVar, Arrays.asList("a1","a3"), BVar, Arrays.asList("b1","b2","b3"));
        }
```

让我完整地更新这两个文件：


---

Read file: src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java

---

现在我来添加新的方法到`ConstraintAlgImpl`类：

```java:src/main/java/com/jmix/configengine/artifact/ConstraintAlgImpl.java
		model.addImplication(rightCond, leftCond);
		
		// 反向2.2：如果右侧非条件为true，则左侧非条件必须为true
		model.addImplication(rightNotCond, leftNotCond);
	}
	
	/**
     * 兼容性规则：Incompatible关系约束
     * 规则内容：双向不兼容关系，左侧参数和右侧参数不能在对应的组内同时存在
     * 例如：(a1,a3) Incompatible (b1,b2,b3) 表示：
     * - 如果A选择a1或a3，则B不能选择b1、b2或b3（必须选择b4或b5）
     * - 如果A选择a2、a4或a5，则B可以选择任意值
     * - 如果B选择b1、b2或b3，则A不能选择a1或a3（必须选择a2、a4或a5）
     * - 如果B选择b4或b5，则A可以选择任意值
     */
    public void addCompatibleConstraintIncompatible(String ruleCode, ParaVar leftParaVar, List<String> leftParaFilterOptionCodes,
		ParaVar rightParaVar, List<String> rightParaFilterOptionCodes) {
		// left:确保只有一个参数选项被选中
		model.addExactlyOne(leftParaVar.optionSelectVars.values().stream()
			.map(option -> option.getIsSelectedVar())
			.toArray(BoolVar[]::new));
		// right:确保只有一个参数选项被选中
		model.addExactlyOne(rightParaVar.optionSelectVars.values().stream()
			.map(option -> option.getIsSelectedVar())
			.toArray(BoolVar[]::new));

		// 定义左侧条件：左侧集合中至少一个被选中
		BoolVar leftCond = model.newBoolVar(ruleCode + "_" + "leftCond");
		Literal[] leftSelected = leftParaVar.optionSelectVars.values().stream()
			.filter(option -> leftParaFilterOptionCodes.contains(option.getCode()))
			.map(option -> (Literal) option.getIsSelectedVar())
			.toArray(Literal[]::new);
		// 当leftCond为true时，左侧集合中至少一个被选中；当为false时，左侧集合全部不被选中
		model.addBoolOr(leftSelected).onlyEnforceIf(leftCond);
		model.addBoolAnd(Arrays.stream(leftSelected).map(Literal::not).toArray(Literal[]::new)).onlyEnforceIf(leftCond.not());

		// 定义右侧条件：右侧集合中至少一个被选中
		BoolVar rightCond = model.newBoolVar(ruleCode + "_" + "rightCond");
		Literal[] rightSelected = rightParaVar.optionSelectVars.values().stream()
			.filter(option -> rightParaFilterOptionCodes.contains(option.getCode()))
			.map(option -> (Literal) option.getIsSelectedVar())
			.toArray(Literal[]::new);
		// 当rightCond为true时，右侧集合中至少一个被选中；当为false时，右侧集合全部不被选中
		model.addBoolOr(rightSelected).onlyEnforceIf(rightCond);
		model.addBoolAnd(Arrays.stream(rightSelected).map(Literal::not).toArray(Literal[]::new)).onlyEnforceIf(rightCond.not());

		// 定义左侧非条件：左侧集合外至少一个被选中
		BoolVar leftNotCond = model.newBoolVar(ruleCode + "_" + "leftNotCond");
		Literal[] leftNotSelected = leftParaVar.optionSelectVars.values().stream()
			.filter(option -> !leftParaFilterOptionCodes.contains(option.getCode()))
			.map(option -> (Literal) option.getIsSelectedVar())
			.toArray(Literal[]::new);
		// 当leftNotCond为true时，左侧集合外至少一个被选中；当为false时，左侧集合外全部不被选中
		model.addBoolOr(leftNotSelected).onlyEnforceIf(leftNotCond);
		model.addBoolAnd(Arrays.stream(leftNotSelected).map(Literal::not).toArray(Literal[]::new)).onlyEnforceIf(leftNotCond.not());

		// 定义右侧非条件：右侧集合外至少一个被选中
		BoolVar rightNotCond = model.newBoolVar(ruleCode + "_" + "rightNotCond");
		Literal[] rightNotSelected = rightParaVar.optionSelectVars.values().stream()
			.filter(option -> !rightParaFilterOptionCodes.contains(option.getCode()))
			.map(option -> (Literal) option.getIsSelectedVar())
			.toArray(Literal[]::new);
		// 当rightNotCond为true时，右侧集合外至少一个被选中；当为false时，右侧集合外全部不被选中
		model.addBoolOr(rightNotSelected).onlyEnforceIf(rightNotCond);
		model.addBoolAnd(Arrays.stream(rightNotSelected).map(Literal::not).toArray(Literal[]::new)).onlyEnforceIf(rightNotCond.not());
		
		// 实现Incompatible双向关系：
		// 正向1.1：如果左侧条件为true，则右侧条件必须为false（右侧非条件必须为true）
		model.addImplication(leftCond, rightNotCond);
		
		// 正向1.2：如果左侧非条件为true，则右侧可以是任意值（无约束）
		// 这个约束不需要显式添加，因为默认允许
		
		// 反向2.1：如果右侧条件为true，则左侧条件必须为false（左侧非条件必须为true）
		model.addImplication(rightCond, leftNotCond);
		
		// 反向2.2：如果右侧非条件为true，则左侧可以是任意值（无约束）
		// 这个约束不需要显式添加，因为默认允许
	}
}
```

现在更新测试类：

```java:src/test/java/com/jmix/configengine/scenario/ruletest/CompatiableRuleIncompatibleTest.java
        @Override
        protected void initConstraint() {
            //注意： 一定要选择一个值怎么理解（如果不选择，也设置一个可选值就可以表达，这样模型统一了）
            //A=(a1,a2,a3,a4,a5),AVar.value的值域
            //B=(b1,b2,b3,b4,b5),BVar.value的值域
            // 规则内容：(a1,a3) Incompatible (b1,b2,b3)，则CA=(a1,a3),CB=(b1,b2,b3),NCA=(a2,a4,a5),NCB=(b4,b5)
            // 解读：
            // 1、正向
            // 1.1 如果AVar.value取CA的一个值(在CA中)，则BVar.value一定不是CB的一个值，取CB内的值是非法的，只能是NCB内的值，如:如果AVar.var=a1,则BVar.var=b4或b5(NCB),不可以是b1 或 b2 或 b3(CB)
            // 1.2 如果AVar.value取NCA一个值(不在CA中)，则BVar.value可以是CB的一个值，也可以是NCB的一个值，如：如果AVar.var=a2,则BVar.var=b1或b2或b3(CB),也可以是b4或b5(NCB)
            // 2.反向
            // 2.1 如果BVar.value取CB的一个值(在CB中)，则AVar.value一定不是CA的一个值，取CA内的值是非法的，只能是NCA内的值，如:如果BVar.var=b1,则AVar.var=a2或a4或a5(NCA),不可以是a1 或 a3(CA)
            // 2.2 如果BVar.value取NCB一个值(不在CB中)，则AVar.value可以是CA的一个值，也可以是NCA的一个值，如：如果BVar.var=b4,则AVar.var=a1 或 a3(CA),也可以是a2 或 a4或a5(NCA)
            
            // 使用泛化的Incompatible约束方法
            addCompatibleConstraintIncompatible("rule1", AVar, Arrays.asList("a1","a3"), BVar, Arrays.asList("b1","b2","b3"));
        }
```

让我运行测试来验证实现是否正确：


---

```bash
cd D:\01.code\mygithub\jmixconfigengine && mvn test -Dtest=CompatiableRuleIncompatibleTest#testInCARequiresNotInCB
```

```
D:\01.code\mygithub\jmixconfigengine>cd D:\01.code\mygithub\jmixconfigengine && 
mvn test -Dtest=CompatiableRuleIncompatibleTest#testInCARequiresNotInCB
Microsoft Windows [版本 10.0.19045.5131]
(c) Microsoft Corporation。保留所有权利。

D:\01.code\mygithub\jmixconfigengine>cd D:\01.code\mygithub\jmixconfigengine &
& mvn test -Dtest=CompatiableRuleIncompatibleTest#testInCARequiresNotInCB
```

---

让我检查一下Maven是否可用：


---

```bash
mvn --version
```

```
[INFO] Using auto detected provider org.apache.maven.surefire.junit4.JUnit4Provider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] Running com.jmix.configengine.scenario.ruletest.CompatiableRuleIncompatibleTest
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - 检测到内部类: com.jmix.configeng
ine.scenario.ruletest.CompatiableRuleIncompatibleTest$CompatiableRuleIncompatibleConstraint，父类: com.jm
ix.configengine.scenario.ruletest.CompatiableRuleIncompatibleTest
[main] INFO com.jmix.configengine.util.ModuleUtils - Serializing Module to JSON file: src/test/java/com/j
mix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.util.ModuleUtils - Successfully serialized Module to JSON file: src/tes
t/java/com/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json        
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - Module已保存到: src/test/java/co
m/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Added modules: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=10, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=1},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=50, isHidden=0, options=ParaOption{code=b5, selected=1},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=10, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@4b8729ff
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b1
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b2
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b3
，数量: 0
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.116 s -- in com.jmix.configengin
e.scenario.ruletest.CompatiableRuleIncompatibleTest
[INFO] 
[INFO] Results:
[INFO]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  6.168 s
[INFO] Finished at: 2025-09-06T15:07:42+08:00
[INFO] ------------------------------------------------------------------------

D:\01.code\mygithub\jmixconfigengine>q^D^C
'q' 不是内部或外部命令，也不是可运行的程序
或批处理文件。

D:\01.code\mygithub\jmixconfigengine>mvn --version
Apache Maven 3.9.11 (3e54c93a704957b63ee3494413a2b544fd3d825b)
Maven home: C:\Users\Administrator\AppData\Roaming\Cursor\User\globalStorage\pleiades.java-extension-pack
-jdk\maven\latest
Java version: 21.0.6, vendor: Oracle Corporation, runtime: C:\Program Files\Java\jdk-21
Default locale: zh_CN, platform encoding: UTF-8
OS name: "windows 10", version: "10.0", arch: "amd64", family: "windows"

D:\01.code\mygithub\jmixconfigengine>
```

---

太好了！测试通过了。让我运行更多的测试来验证所有功能：


---

```bash
mvn test -Dtest=CompatiableRuleIncompatibleTest
```

```
D:\01.code\mygithub\jmixconfigengine>mvn test -Dtest=CompatiableRuleIncompatibleTest
[INFO] Scanning for projects...
[INFO]
[INFO] -----------------------< com.jmix:configengine >------------------------
[INFO] Building JMix Config Engine 1.0.0
[INFO]   from pom.xml
[INFO]
[INFO] --- resources:3.3.1:resources (default-resources) @ configengine ---
[INFO] Copying 1 resource from src\main\resources to target\classes
[INFO]
[INFO] --- compiler:3.8.1:compile (default-compile) @ configengine ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- resources:3.3.1:testResources (default-testResources) @ configengine ---
[INFO] Copying 2 resources from src\test\resources to target\test-classes
[INFO]
[INFO] --- compiler:3.8.1:testCompile (default-testCompile) @ configengine ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- surefire:3.2.5:test (default-test) @ configengine ---
[INFO] Using auto detected provider org.apache.maven.surefire.junit4.JUnit4Provider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.jmix.configengine.scenario.ruletest.CompatiableRuleIncompatibleTest
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Module constraint executor init
ialized
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - 检测到内部类: com.jmix.configeng
ine.scenario.ruletest.CompatiableRuleIncompatibleTest$CompatiableRuleIncompatibleConstraint，父类: com.jm
ix.configengine.scenario.ruletest.CompatiableRuleIncompatibleTest
[main] INFO com.jmix.configengine.util.ModuleUtils - Serializing Module to JSON file: src/test/java/com/j
mix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.util.ModuleUtils - Successfully serialized Module to JSON file: src/tes
t/java/com/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json        
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - Module已保存到: src/test/java/co
m/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Added modules: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=50, isHidden=0, options=ParaOption{code=b5, selected=1},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=B,value=30, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=1},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:4-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:4-----------
 Para{code=B,value=20, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=1
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:5-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:5-----------
 Para{code=B,value=10, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=1},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@2438dcd
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b1
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b2
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b3
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b4
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b5
，数量: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Module constraint executor init
ialized
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - 检测到内部类: com.jmix.configeng
ine.scenario.ruletest.CompatiableRuleIncompatibleTest$CompatiableRuleIncompatibleConstraint，父类: com.jm
ix.configengine.scenario.ruletest.CompatiableRuleIncompatibleTest
[main] INFO com.jmix.configengine.util.ModuleUtils - Serializing Module to JSON file: src/test/java/com/j
mix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.util.ModuleUtils - Successfully serialized Module to JSON file: src/tes
t/java/com/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json        
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - Module已保存到: src/test/java/co
m/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Added modules: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=40, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=1},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=40, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=1},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=50, isHidden=0, options=ParaOption{code=b5, selected=1},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=A,value=40, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=1},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=B,value=30, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=1},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:4-----------
 Para{code=A,value=40, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=1},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:4-----------
 Para{code=B,value=20, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=1
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:5-----------
 Para{code=A,value=40, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=1},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:5-----------
 Para{code=B,value=10, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=1},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@1a5b6f42
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b1
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b2
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b3
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b4
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b5
，数量: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Module constraint executor init
ialized
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - 检测到内部类: com.jmix.configeng
ine.scenario.ruletest.CompatiableRuleIncompatibleTest$CompatiableRuleIncompatibleConstraint，父类: com.jm
ix.configengine.scenario.ruletest.CompatiableRuleIncompatibleTest
[main] INFO com.jmix.configengine.util.ModuleUtils - Serializing Module to JSON file: src/test/java/com/j
mix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.util.ModuleUtils - Successfully serialized Module to JSON file: src/tes
t/java/com/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json        
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - Module已保存到: src/test/java/co
m/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Added modules: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=50, isHidden=0, options=ParaOption{code=a5, selected=1},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=50, isHidden=0, options=ParaOption{code=a5, selected=1},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=50, isHidden=0, options=ParaOption{code=b5, selected=1},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=A,value=50, isHidden=0, options=ParaOption{code=a5, selected=1},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=B,value=30, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=1},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:4-----------
 Para{code=A,value=50, isHidden=0, options=ParaOption{code=a5, selected=1},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:4-----------
 Para{code=B,value=20, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=1
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:5-----------
 Para{code=A,value=50, isHidden=0, options=ParaOption{code=a5, selected=1},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:5-----------
 Para{code=B,value=10, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=1},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@32115b28
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b1
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b2
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b3
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b4
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b5
，数量: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Module constraint executor init
ialized
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - 检测到内部类: com.jmix.configeng
ine.scenario.ruletest.CompatiableRuleIncompatibleTest$CompatiableRuleIncompatibleConstraint，父类: com.jm
ix.configengine.scenario.ruletest.CompatiableRuleIncompatibleTest
[main] INFO com.jmix.configengine.util.ModuleUtils - Serializing Module to JSON file: src/test/java/com/j
mix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.util.ModuleUtils - Successfully serialized Module to JSON file: src/tes
t/java/com/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json        
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - Module已保存到: src/test/java/co
m/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Added modules: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=10, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=1},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=50, isHidden=0, options=ParaOption{code=b5, selected=1},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=10, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=1},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@6bb4dd34
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b1
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b2
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b3
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b4
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b5
，数量: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=50, isHidden=0, options=ParaOption{code=b5, selected=1},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=B,value=30, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=1},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:4-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:4-----------
 Para{code=B,value=20, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=1
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:5-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:5-----------
 Para{code=B,value=10, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=1},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@7d9f158f
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b1
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b2
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b3
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b4
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b5
，数量: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=40, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=1},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=10, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=1},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=50, isHidden=0, options=ParaOption{code=a5, selected=1},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=10, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=1},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=B,value=10, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=1},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@45efd90f
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a1
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a3
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a2
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a4
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a5
，数量: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=40, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=1},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=50, isHidden=0, options=ParaOption{code=a5, selected=1},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=A,value=30, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=1},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:4-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:4-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:5-----------
 Para{code=A,value=10, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=1},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:5-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@4b8729ff
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a1
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a3
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a2
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a4
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a5
，数量: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Module constraint executor init
ialized
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - 检测到内部类: com.jmix.configeng
ine.scenario.ruletest.CompatiableRuleIncompatibleTest$CompatiableRuleIncompatibleConstraint，父类: com.jm
ix.configengine.scenario.ruletest.CompatiableRuleIncompatibleTest
[main] INFO com.jmix.configengine.util.ModuleUtils - Serializing Module to JSON file: src/test/java/com/j
mix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.util.ModuleUtils - Successfully serialized Module to JSON file: src/tes
t/java/com/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json        
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - Module已保存到: src/test/java/co
m/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Added modules: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=10, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=1},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=50, isHidden=0, options=ParaOption{code=b5, selected=1},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=10, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=1},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@3214ee6
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b1
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b2
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b3
，数量: 0
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Module constraint executor init
ialized
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - 检测到内部类: com.jmix.configeng
ine.scenario.ruletest.CompatiableRuleIncompatibleTest$CompatiableRuleIncompatibleConstraint，父类: com.jm
ix.configengine.scenario.ruletest.CompatiableRuleIncompatibleTest
[main] INFO com.jmix.configengine.util.ModuleUtils - Serializing Module to JSON file: src/test/java/com/j
mix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.util.ModuleUtils - Successfully serialized Module to JSON file: src/tes
t/java/com/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json        
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - Module已保存到: src/test/java/co
m/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Added modules: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=40, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=1},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=50, isHidden=0, options=ParaOption{code=a5, selected=1},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=A,value=30, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=1},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:4-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:4-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:5-----------
 Para{code=A,value=10, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=1},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:5-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@4a07d605
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a1
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a3
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a2
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a4
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a5
，数量: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Module constraint executor init
ialized
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - 检测到内部类: com.jmix.configeng
ine.scenario.ruletest.CompatiableRuleIncompatibleTest$CompatiableRuleIncompatibleConstraint，父类: com.jm
ix.configengine.scenario.ruletest.CompatiableRuleIncompatibleTest
[main] INFO com.jmix.configengine.util.ModuleUtils - Serializing Module to JSON file: src/test/java/com/j
mix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.util.ModuleUtils - Successfully serialized Module to JSON file: src/tes
t/java/com/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json        
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - Module已保存到: src/test/java/co
m/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Added modules: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=40, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=1},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=20, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=1
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=50, isHidden=0, options=ParaOption{code=a5, selected=1},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=20, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=1
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=B,value=20, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=1
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@7d7758be
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a2
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a4
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a5
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a1
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a3
，数量: 0
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Module constraint executor init
ialized
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - 检测到内部类: com.jmix.configeng
ine.scenario.ruletest.CompatiableRuleIncompatibleTest$CompatiableRuleIncompatibleConstraint，父类: com.jm
ix.configengine.scenario.ruletest.CompatiableRuleIncompatibleTest
[main] INFO com.jmix.configengine.util.ModuleUtils - Serializing Module to JSON file: src/test/java/com/j
mix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.util.ModuleUtils - Successfully serialized Module to JSON file: src/tes
t/java/com/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json        
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - Module已保存到: src/test/java/co
m/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Added modules: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=30, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=1},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=50, isHidden=0, options=ParaOption{code=b5, selected=1},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=30, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=1},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@5f9edf14
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b1
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b2
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b3
，数量: 0
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Module constraint executor init
ialized
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - 检测到内部类: com.jmix.configeng
ine.scenario.ruletest.CompatiableRuleIncompatibleTest$CompatiableRuleIncompatibleConstraint，父类: com.jm
ix.configengine.scenario.ruletest.CompatiableRuleIncompatibleTest
[main] INFO com.jmix.configengine.util.ModuleUtils - Serializing Module to JSON file: src/test/java/com/j
mix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.util.ModuleUtils - Successfully serialized Module to JSON file: src/tes
t/java/com/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json        
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - Module已保存到: src/test/java/co
m/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Added modules: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=40, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=1},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=10, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=1},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=50, isHidden=0, options=ParaOption{code=a5, selected=1},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=10, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=1},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=B,value=10, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=1},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@a8ef162
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a2
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a4
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a5
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a1
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a3
，数量: 0
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Module constraint executor init
ialized
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - 检测到内部类: com.jmix.configeng
ine.scenario.ruletest.CompatiableRuleIncompatibleTest$CompatiableRuleIncompatibleConstraint，父类: com.jm
ix.configengine.scenario.ruletest.CompatiableRuleIncompatibleTest
[main] INFO com.jmix.configengine.util.ModuleUtils - Serializing Module to JSON file: src/test/java/com/j
mix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.util.ModuleUtils - Successfully serialized Module to JSON file: src/tes
t/java/com/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json        
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - Module已保存到: src/test/java/co
m/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Added modules: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=10, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=1},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=50, isHidden=0, options=ParaOption{code=b5, selected=1},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=10, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=1},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=40, isHidden=0, options=ParaOption{code=b5, selected=0},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=1},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@18317edc
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b1
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b2
，数量: 0
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: B:b3
，数量: 0
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Module constraint executor init
ialized
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - 检测到内部类: com.jmix.configeng
ine.scenario.ruletest.CompatiableRuleIncompatibleTest$CompatiableRuleIncompatibleConstraint，父类: com.jm
ix.configengine.scenario.ruletest.CompatiableRuleIncompatibleTest
[main] INFO com.jmix.configengine.util.ModuleUtils - Serializing Module to JSON file: src/test/java/com/j
mix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.util.ModuleUtils - Successfully serialized Module to JSON file: src/tes
t/java/com/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json        
[main] INFO com.jmix.configengine.scenario.base.ModuleGenneratorByAnno - Module已保存到: src/test/java/co
m/jmix/configengine/scenario/ruletest/tempResource/CompatiableRuleIncompatible.base.json
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - Added modules: 1
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=A,value=40, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=1},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:1-----------
 Para{code=B,value=50, isHidden=0, options=ParaOption{code=b5, selected=1},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=A,value=50, isHidden=0, options=ParaOption{code=a5, selected=1},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:2-----------
 Para{code=B,value=50, isHidden=0, options=ParaOption{code=b5, selected=1},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=A,value=30, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=1},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:3-----------
 Para{code=B,value=50, isHidden=0, options=ParaOption{code=b5, selected=1},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:4-----------
 Para{code=A,value=20, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=1
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=0},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:4-----------
 Para{code=B,value=50, isHidden=0, options=ParaOption{code=b5, selected=1},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:5-----------
 Para{code=A,value=10, isHidden=0, options=ParaOption{code=a5, selected=0},ParaOption{code=a2, selected=0
},ParaOption{code=a4, selected=0},ParaOption{code=a1, selected=1},ParaOption{code=a3, selected=0},}      
[main] INFO com.jmix.configengine.executor.ModuleConstraintExecutorImpl - -------------varInfos-solutionI
ndex:5-----------
 Para{code=B,value=50, isHidden=0, options=ParaOption{code=b5, selected=1},ParaOption{code=b2, selected=0
},ParaOption{code=b4, selected=0},ParaOption{code=b1, selected=0},ParaOption{code=b3, selected=0},}      
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 推理结果: com.jmix.configengine.
ModuleConstraintExecutor$Result@238d68ff
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a1
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a3
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a2
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a4
，数量: 1
[main] INFO com.jmix.configengine.scenario.base.ModuleSecnarioTestBase - 解决方案数量验证通过，条件: A:a5
，数量: 1
[INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.143 s -- in com.jmix.configengi
ne.scenario.ruletest.CompatiableRuleIncompatibleTest
[INFO] 
[INFO] Results:
[INFO]
[INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  2.955 s
[INFO] Finished at: 2025-09-06T15:07:51+08:00
[INFO] ------------------------------------------------------------------------

D:\01.code\mygithub\jmixconfigengine>
```

---

太棒了！所有11个测试都通过了！现在让我总结一下完成的工作：

## 🎉 完成总结

### ✅ **已完成的工作**

1. **创建了泛化的`addCompatibleConstraintIncompatible`方法**：
   - 在`ConstraintAlgImpl`类中添加了新的方法
   - 参考了现有的`addCompatibleConstraintRequires`和`addCompatibleConstraintCoDependent`方法的结构
   - 实现了不兼容性约束的双向逻辑

2. **更新了测试类**：
   - 将手写的约束代码替换为调用泛化方法
   - 修正了所有测试用例，使其符合不兼容性约束的逻辑
   - 所有11个测试用例都通过验证

### 🔧 **核心实现逻辑**

```java
// 实现Incompatible双向关系：
// 正向1.1：如果左侧条件为true，则右侧条件必须为false（右侧非条件必须为true）
model.addImplication(leftCond, rightNotCond);

// 反向2.1：如果右侧条件为true，则左侧条件必须为false（左侧非条件必须为true）
model.addImplication(rightCond, leftNotCond);
```

### 📊 **测试验证结果**

- **11个测试用例全部通过**
- 验证了不兼容性约束的所有场景：
  - A在CA中时，B必须在NCB中
  - A不在CA中时，B可以是任意值
  - B在CB中时，A必须在NCA中
  - B不在CB中时，A可以是任意值

### 🎯 **关键优势**

1. **代码复用**：通过泛化方法，避免了重复的约束实现代码
2. **一致性**：与现有的`Requires`和`CoDependent`方法保持相同的API风格
3. **可维护性**：集中管理约束逻辑，便于后续维护和扩展
4. **测试覆盖**：完整的测试用例确保功能正确性

现在不兼容性约束已经成功实现并集成到框架中，可以像其他约束类型一样方便地使用！

---

